{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport * as API from \"./utils\";\nexport var getCustomerCoupons = function getCustomerCoupons(id) {\n  return fetch(API.URL_CUSTOMER + \"/\" + id + \"/coupons\").then(function (r) {\n    return r.json();\n  }).then(function (r) {\n    console.log(r);\n    return r;\n  }).catch(function (e) {\n    return console.log(e);\n  });\n};\nexport var getCustomerById = function getCustomerById(id) {\n  return _regeneratorRuntime.async(function getCustomerById$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          return _context.abrupt(\"return\", fetch(API.URL_CUSTOMER + \"/\" + id).then(function (r) {\n            return r.json();\n          }).then(function (r) {\n            console.log(r);\n            return r[0];\n          }).catch(function (e) {\n            return console.log(e);\n          }));\n\n        case 1:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\nexport var authCustomer = function authCustomer(log) {\n  return fetch(API.URL_CUSTOMER + \"/login\", {\n    method: 'POST',\n    body: JSON.stringify(log)\n  }).then(function (r) {\n    return r.json();\n  }).then(function (r) {\n    return r;\n  }).catch(function (e) {\n    return console.log(e);\n  });\n};\nexport var addCoupon = function addCoupon(id, id_coupon) {\n  var body = {\n    id_coupon: id_coupon\n  };\n  return fetch(API.URL_CUSTOMER + \"/\" + id + \"/coupons/add\", {\n    method: 'POST',\n    body: JSON.stringify(body)\n  }).then(function (r) {\n    return r.json();\n  }).then(function (r) {\n    return r;\n  }).catch(function (e) {\n    return console.log(e);\n  });\n};\nexport var updateCustomer = function updateCustomer(customer) {\n  return fetch(API.URL_CUSTOMER + \"/\" + customer.id + \"/coupons\", {\n    method: 'PUT',\n    body: JSON.stringify(customer)\n  }).then(function (r) {\n    return r.json();\n  }).then(function (r) {\n    return r;\n  }).catch(function (e) {\n    return console.log(e);\n  });\n};","map":{"version":3,"sources":["C:/Users/Romain/Documents/EPSI 3e ANNÉE/MSPR/GoStyle/React/GoStyle/functions/back/customer.js"],"names":["API","getCustomerCoupons","id","fetch","URL_CUSTOMER","then","r","json","console","log","catch","e","getCustomerById","authCustomer","method","body","JSON","stringify","addCoupon","id_coupon","updateCustomer","customer"],"mappings":"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","sourcesContent":["import * as API from './utils'\r\n\r\n\r\n/**\r\n * récupère la liste complète des coupons d'un customer\r\n * renvoie un tableau\r\n */\r\nexport const getCustomerCoupons = (id) => {\r\n\r\n    return fetch(`${API.URL_CUSTOMER}/${id}/coupons`)\r\n        .then(r => r.json())\r\n        .then(r => {\r\n            console.log(r)\r\n            return r})\r\n        .catch(e => console.log(e))\r\n}\r\n\r\n/**\r\n * récupère un customer d'après son id\r\n * renvoie un customer\r\n * @Param id\r\n */\r\nexport const getCustomerById = async(id) => {\r\n\r\n    return fetch(`${API.URL_CUSTOMER}/${id}`)\r\n        .then(r => r.json())\r\n        .then(r => {\r\n            console.log(r)\r\n            return r[0]})\r\n        .catch(e => console.log(e))\r\n}\r\n\r\n/**\r\n * check si le couple identifiant/mot de passe existe en bdd\r\n * necessite dans le body:\r\n * login,password\r\n * login = email pour l'instant\r\n * @Param log:{login,password}\r\n */\r\nexport const authCustomer = (log) => {\r\n\r\n    return fetch(`${API.URL_CUSTOMER}/login`, {method: 'POST', body: JSON.stringify(log)})\r\n        .then(r => r.json())\r\n        .then(r => r)\r\n        .catch(e => console.log(e))\r\n}\r\n\r\n/**\r\n * ajoute un coupon au compte du customer\r\n * necessite dans le body:\r\n * id_coupon\r\n * @Param id,id_coupon\r\n */\r\nexport const addCoupon = (id, id_coupon) => {\r\n    const body = {\r\n        id_coupon: id_coupon\r\n    }\r\n    return fetch(`${API.URL_CUSTOMER}/${id}/coupons/add`, {method: 'POST', body: JSON.stringify(body)})\r\n        .then(r => r.json())\r\n        .then(r => r)\r\n        .catch(e => console.log(e))\r\n}\r\n\r\n/**\r\n * update un customer\r\n * necessite en paramètre:\r\n * first_name, last_name, mail, password, birth_date\r\n * @Param customer\r\n */\r\nexport const updateCustomer = (customer) => {\r\n\r\n    return fetch(`${API.URL_CUSTOMER}/${customer.id}/coupons`, {method: 'PUT', body: JSON.stringify(customer)})\r\n        .then(r => r.json())\r\n        .then(r => r)\r\n        .catch(e => console.log(e))\r\n}\r\n//todo createCustomer\r\n\r\n"]},"metadata":{},"sourceType":"module"}